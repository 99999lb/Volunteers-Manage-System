12.10--完成管理员和普通用户的账号登录检测功能

触发器：
 if exists(select name from sysobjects where name='cif_del' and type='TR')
 drop trigger cif_del
 go

create trigger cif_del
 on Customer
 after delete
as
 declare @id char(8)
 select @id=CID
 from deleted

delete from CInfo

where CID=@id
go

 if exists(select name from sysobjects where name='cif_ins' and type='TR')
 drop trigger cif_ins
 go

create trigger cif_ins
 on Customer
 after insert
as
 declare @id char(8)
 select @id=CID
 from inserted

 insert into CInfo(CID,Pass,Csort)
 values(@id,'Y','P')
go

 if exists(select name from sysobjects where name='cact_del' and type='TR')
 drop trigger cact_del
 go

create trigger cact_del
 on ActInfo
 after delete
as
 declare @aid char(8)
 select @aid=ActID
 from deleted

 delete from ActCreate where ActID=@aid

go

 if exists(select name from sysobjects where name='joinact_del' and type='TR')
 drop trigger joinact_del
 go

create trigger joinact_del
 on ActInfo
 after delete
as
 declare @aid char(8)
 select @aid=ActID
 from deleted

 delete from ActJoin where ActID=@aid

go

 if exists(select name from sysobjects where name='finact_upd' and type='TR')
 drop trigger finact_upd
 go

create trigger finact_upd
 on ActCreate
 after update
as
 declare @aid char(12)
 select @aid=ActID
 from inserted

 update ActJoin set fin='Y' where AcTID=@aid

go